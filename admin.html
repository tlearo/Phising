<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self'; object-src 'none'; base-uri 'self'; frame-ancestors 'none'" />

    <title>Cyber Escape Rooms — Admin Dashboard</title>

    <link rel="stylesheet" href="css/styles.css" />

    <!-- Accessibility helpers & app logic -->
    <script src="js/accessibility.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js" defer></script>
    <script src="js/admin.js" defer></script>
</head>


<body>
    <a class="skip-link" href="#main">Skip to content</a>
    <main class="container">
        <header class="game-header">
            <h1 class="glow">Admin Dashboard</h1>
            <p id="adminWelcome" class="mt-1" style="color:var(--muted)">Welcome, Admin!</p>
        </header>
        <header class="site-header">
            <div class="brand">
                <img src="assets/logo.svg" alt="" class="logo" />
                <h1 class="glow">Cyber Escape Rooms</h1>
            </div>
            <nav class="header-actions">
                <button class="btn ghost" onclick="history.back()">Back</button>
                <a class="btn" href="index.html">Home</a>
            </nav>
        </header>

        <!-- Two-column layout on laptop; stacks on mobile -->
        <section class="main-layout mt-2">
            <!-- LEFT: Leaderboard & summary stats -->
            <div class="left-panel">
                <section class="card">
                    <h2>Team Progress</h2>
                    <div id="teamProgressList" class="team-grid mt-1"></div>
                </section>

                <section class="card mt-2">
                    <h2>Stats &amp; Metrics</h2>
                    <p id="averageTimeStats" class="mt-1"></p>
                </section>

                <div class="flex mt-2">
                    <a href="index.html"><button class="btn ghost">Back to Login</button></a>
                    <button class="btn" onclick="logout()">Logout</button>
                </div>
            </div>

            <!-- RIGHT: Charts -->
            <div class="right-panel">
                <section class="card">
                    <h2>Puzzle Completion Overview</h2>
                    <canvas id="progressChart" width="400" height="220" class="mt-1"></canvas>
                </section>

                <section class="card mt-2">
                    <h2>Avg Completion Time (seconds)</h2>
                    <canvas id="timeChart" width="400" height="220" class="mt-1"></canvas>
                </section>
            </div>
        </section>

        <footer class="mt-3">
            <p style="color:var(--muted)">Charts update based on each team’s local progress/timing data.</p>
        </footer>
    </main>
</body>
<footer class="site-footer">
    <p>2025 Cyber Escape Rooms</p>
</footer>

</html>